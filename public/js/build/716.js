"use strict";(self.webpackChunkDooTask=self.webpackChunkDooTask||[]).push([[716],{59697:(t,e,n)=>{n.d(e,{A:()=>r});var a=n(76798),o=n.n(a)()((function(t){return t[1]}));o.push([t.id,".drawio-content[data-v-6aaeb891],.drawio-content .drawio-iframe[data-v-6aaeb891]{height:100%;left:0;position:absolute;top:0;width:100%}.drawio-content .drawio-iframe[data-v-6aaeb891]{background:0 0;border:0;float:none;margin:-1px 0 0;max-width:none;outline:0;padding:0}.drawio-content .drawio-loading[data-v-6aaeb891]{left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}",""]);const r=o},9716:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var a=n(95353);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function i(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=o(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const s={name:"Drawio",props:{value:{type:Object,default:function(){return{}}},title:{type:String,default:""},readOnly:{type:Boolean,default:!1}},data:function(){return{loadIng:!0,url:null,bakData:""}},created:function(){var t="en";switch(this.getLanguage()){case"CN":case"TC":t="zh"}var e=this.readOnly?1:0,n=this.readOnly?0:1,a=this.themeIsDark?"dark":"kennedy",o=this.title?encodeURIComponent(this.title):"",r="?title=".concat(o,"&chrome=").concat(n,"&lightbox=").concat(e,"&ui=").concat(a,"&lang=").concat(t,"&offline=1&pwa=0&embed=1&noLangIcon=1&noExitBtn=1&noSaveBtn=1&saveAndExit=0&spin=1&proto=json");this.$Electron?this.url=$A.originUrl("drawio/webapp/index.html".concat(r)):this.url=$A.apiUrl("../drawio/webapp/".concat(r))},mounted:function(){window.addEventListener("message",this.handleMessage)},beforeDestroy:function(){window.removeEventListener("message",this.handleMessage)},watch:{value:{handler:function(t){this.bakData!=$A.jsonStringify(t)&&(this.bakData=$A.jsonStringify(t),this.updateContent())},deep:!0}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,a.aH)(["themeIsDark"])),methods:{formatZoom:function(t){return t+"%"},updateContent:function(){this.$refs.myFlow.contentWindow.postMessage(JSON.stringify({action:"load",autosave:1,xml:this.value.xml}),"*")},handleMessage:function(t){var e=this.$refs.myFlow.contentWindow;if(t.source===e){var n=$A.jsonParse(t.data);switch(n.event){case"init":this.loadIng=!1,this.updateContent();break;case"load":void 0===this.value.xml&&e.postMessage(JSON.stringify({action:"template"}),"*");break;case"autosave":var a={xml:n.xml};this.bakData=$A.jsonStringify(a),this.$emit("input",a);break;case"save":this.$emit("saveData")}}}}};var c=n(85072),l=n.n(c),u=n(59697),d={insert:"head",singleton:!1};l()(u.A,d);u.A.locals;const f=(0,n(14486).A)(s,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"drawio-content"},[e("iframe",{ref:"myFlow",staticClass:"drawio-iframe",attrs:{src:t.url}}),t._v(" "),t.loadIng?e("div",{staticClass:"drawio-loading"},[e("Loading")],1):t._e()])}),[],!1,null,"6aaeb891",null).exports}}]);